{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ebf9959a_2689209a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1293738
      },
      "writtenOn": "2021-03-15T18:18:15Z",
      "side": 1,
      "message": "Could you use:\n\n       -f, --nonmatching\n              Only copy files that do not match any of the given patterns.\n\nAnd then use the [pattern] field for the extraction of the cpio?",
      "revId": "6c924be8a618d0ab70c00c288f90bce4e0193e03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8c9852ec_19eca261",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1293738
      },
      "writtenOn": "2021-03-15T18:33:09Z",
      "side": 1,
      "message": "Okay, we can\u0027t, Will pointed out we\u0027re using the toybox version which lacks this feature.",
      "parentUuid": "ebf9959a_2689209a",
      "revId": "6c924be8a618d0ab70c00c288f90bce4e0193e03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "99cb2af8_4f6a7d4e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1293738
      },
      "writtenOn": "2021-03-16T20:43:22Z",
      "side": 1,
      "message": "I am ok with the ko filtering of initramfs.cpio, but VENDOR_RAMDISK_CMDS is too hacky/flexible and will be abused, so I\u0027m not supportive of it.",
      "revId": "6c924be8a618d0ab70c00c288f90bce4e0193e03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a66cf53_cc792a10",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1224979
      },
      "writtenOn": "2021-03-16T22:01:21Z",
      "side": 1,
      "message": "build.sh is filled with abuse vectors:\n\neval ${PRE_DEFCONFIG_CMDS}\neval ${POST_DEFCONFIG_CMDS}\neval ${POST_KERNEL_BUILD_CMDS}\neval ${EXTRA_CMDS}\neval ${DIST_CMDS}\n\nSo how is this any different:\neval ${VENDOR_RAMDISK_CMDS}\n\nWhen developers use this script, they want to inject their own .kos into prebuilt vendor ramdisk.\n\nBut what if you also need to inject firmware files or any other config file changes for your testing? \n\neval ${VENDOR_RAMDISK_CMDS} provides that hook. It will let the build config file modify the ramdisk as needed for testing.",
      "parentUuid": "99cb2af8_4f6a7d4e",
      "revId": "6c924be8a618d0ab70c00c288f90bce4e0193e03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "38e7d651_49e71fc6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1021676
      },
      "writtenOn": "2021-03-16T22:35:55Z",
      "side": 1,
      "message": "you could achieve the same effect by adding commands to ${DIST_CMDS}, it would just not be as convenient since you\u0027d have break the cpio open again.",
      "parentUuid": "3a66cf53_cc792a10",
      "revId": "6c924be8a618d0ab70c00c288f90bce4e0193e03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bb721660_323de14a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1557540
      },
      "writtenOn": "2021-03-17T00:07:19Z",
      "side": 1,
      "message": "Right, I have provided an example on how to do this with EXTRA_CMDS here pa/1884395. I believe device specific things like fiddling with the ramdisk should be left out of build.sh.",
      "parentUuid": "38e7d651_49e71fc6",
      "revId": "6c924be8a618d0ab70c00c288f90bce4e0193e03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c3209318_de1669b5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1224979
      },
      "writtenOn": "2021-03-18T07:13:02Z",
      "side": 1,
      "message": "Why is it OK to do the vendor ramdisk modifications from inconvenient\n\"eval ${EXTRA_CMDS}\" or \"eval ${DIST_CMDS}\", but not from the newly added \"eval ${VENDOR_RAMDISK_CMDS}\"? What is so much better about those existing evals?\n\nI have added the new eval to exactly where it is needed, when the prebuilt vendor ramdisk has been already extracted for removal of lib/modules. So might as well do all desired modifications at the same time, whatever the developer\u0027s build.config file specifies, before re-packaging it back to cpio.\n\nThe purpose of build.sh is to help developers build kernels and related boot images. I don\u0027t understand the resistance on this. I\u0027m trying to make build.sh more flexible and useful. So that build.config can specify vendor ramdisk modification operations, if it so chooses.\n\nI have a specific use case for this in pa/1881988. If there is anything unclear about it, why it is needed, please contact me.",
      "parentUuid": "bb721660_323de14a",
      "revId": "6c924be8a618d0ab70c00c288f90bce4e0193e03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f14e0f3_f2afbd31",
        "filename": "build.sh",
        "patchSetId": 4
      },
      "lineNbr": 157,
      "author": {
        "id": 1021676
      },
      "writtenOn": "2021-03-16T22:35:55Z",
      "side": 1,
      "message": "please add VENDOR_RAMDISK_CMDS explanation somewhere around here or above.",
      "range": {
        "startLine": 157,
        "startChar": 0,
        "endLine": 157,
        "endChar": 55
      },
      "revId": "6c924be8a618d0ab70c00c288f90bce4e0193e03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f677e4ff_639045cd",
        "filename": "build.sh",
        "patchSetId": 4
      },
      "lineNbr": 1122,
      "author": {
        "id": 1557540
      },
      "writtenOn": "2021-03-15T19:12:18Z",
      "side": 1,
      "message": "Let\u0027s try to avoid adding this by updating the prebuilt ramdisks with what\u0027s needed. Worse case, move this to a separate patch.",
      "range": {
        "startLine": 1122,
        "startChar": 5,
        "endLine": 1122,
        "endChar": 32
      },
      "revId": "6c924be8a618d0ab70c00c288f90bce4e0193e03",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}