{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9a7c1c4d_d9654941",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1905021
      },
      "writtenOn": "2023-05-30T02:13:57Z",
      "side": 1,
      "message": "Hi Yifan,\nCan you check and +2? Tested locally, bazel build succeed.",
      "revId": "8b9841be98666b81193d007e1f16b5d4440bcbb9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f1714263_903428d4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-05-30T18:12:59Z",
      "side": 1,
      "message": "Matthias can you ack on this?",
      "revId": "8b9841be98666b81193d007e1f16b5d4440bcbb9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "97f5789d_3c846f9e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-05-30T18:48:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f1714263_903428d4",
      "revId": "8b9841be98666b81193d007e1f16b5d4440bcbb9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a553cf1c_f66dd5a3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2023-05-30T22:04:15Z",
      "side": 1,
      "message": "The commit message should carry some reasoning and at least a reference to the upstream documentation of that feature.",
      "revId": "8b9841be98666b81193d007e1f16b5d4440bcbb9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d1cad669_1e85e291",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1905021
      },
      "writtenOn": "2023-05-31T01:35:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a553cf1c_f66dd5a3",
      "revId": "8b9841be98666b81193d007e1f16b5d4440bcbb9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c88c6b69_8b9e9029",
        "filename": "kleaf/impl/kernel_config.bzl",
        "patchSetId": 9
      },
      "lineNbr": 301,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2023-05-30T22:04:15Z",
      "side": 1,
      "message": "why is KASAN disabled? that would only be needed for `--kasan --kcsan`, which is contradictory ...",
      "range": {
        "startLine": 300,
        "startChar": 0,
        "endLine": 301,
        "endChar": 39
      },
      "revId": "8b9841be98666b81193d007e1f16b5d4440bcbb9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "be5d7a59_5294f46a",
        "filename": "kleaf/impl/kernel_config.bzl",
        "patchSetId": 9
      },
      "lineNbr": 301,
      "author": {
        "id": 1905021
      },
      "writtenOn": "2023-05-31T01:35:56Z",
      "side": 1,
      "message": "See here https://partnerissuetracker.corp.google.com/issues/182965087#comment5, also tried my local that if enabling KCSAN without disabling KASAN, KCSAN will be disabled finally.",
      "parentUuid": "c88c6b69_8b9e9029",
      "range": {
        "startLine": 300,
        "startChar": 0,
        "endLine": 301,
        "endChar": 39
      },
      "revId": "8b9841be98666b81193d007e1f16b5d4440bcbb9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6d60159d_6dd933f3",
        "filename": "kleaf/impl/kernel_config.bzl",
        "patchSetId": 9
      },
      "lineNbr": 301,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2023-06-05T12:55:19Z",
      "side": 1,
      "message": "Sorry, I am confused. I understand that enabling KCSAN without KASAN disables KCSAN. But effectively this statements _disables_ KASAN. What am I missing? Is there a use cases for `--kasan --kcsan` as in my first comment? Then this would make sense. Is that why KASAN is explicitly disabled here?",
      "parentUuid": "be5d7a59_5294f46a",
      "range": {
        "startLine": 300,
        "startChar": 0,
        "endLine": 301,
        "endChar": 39
      },
      "revId": "8b9841be98666b81193d007e1f16b5d4440bcbb9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "76e519bd_94a72861",
        "filename": "kleaf/impl/kernel_config.bzl",
        "patchSetId": 9
      },
      "lineNbr": 301,
      "author": {
        "id": 1905021
      },
      "writtenOn": "2023-06-05T12:58:19Z",
      "side": 1,
      "message": "I see, will remove it once build error fixed.",
      "parentUuid": "6d60159d_6dd933f3",
      "range": {
        "startLine": 300,
        "startChar": 0,
        "endLine": 301,
        "endChar": 39
      },
      "revId": "8b9841be98666b81193d007e1f16b5d4440bcbb9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ece05dba_8c195adf",
        "filename": "kleaf/impl/kernel_config.bzl",
        "patchSetId": 9
      },
      "lineNbr": 301,
      "author": {
        "id": 1905021
      },
      "writtenOn": "2023-06-06T01:47:20Z",
      "side": 1,
      "message": "I retested by removing these two lines, and the final vmlinux doesn\u0027t have kcsan symbols.\n```\nnm out/bazel/output_user_root/904f9ed7a73712f23d479ad825e96158/execroot/__main__/bazel-out/k8-fastbuild/bin/common/kernel_aarch64/vmlinux | grep -i kcsan\n```\n\nInstead, it has kasan symbols.\n\nThen I build with \n```\ntools/bazel build //common:kernel_aarch64_dist\n```\n\nAnd the final vmlinux has kasan symbols too.\n\nThen I reverted this --kcsan change and rebuild.\n\nThe final vmlinux still has kasan symbols. Checked the .config too, which contains KASAN config.\n\n```\n$ cat $(find out/ -name .config) | grep KASAN\nCONFIG_HAVE_ARCH_KASAN\u003dy\nCONFIG_HAVE_ARCH_KASAN_SW_TAGS\u003dy\nCONFIG_HAVE_ARCH_KASAN_HW_TAGS\u003dy\nCONFIG_HAVE_ARCH_KASAN_VMALLOC\u003dy\nCONFIG_CC_HAS_KASAN_GENERIC\u003dy\nCONFIG_CC_HAS_KASAN_SW_TAGS\u003dy\nCONFIG_KASAN\u003dy\n# CONFIG_KASAN_GENERIC is not set\n# CONFIG_KASAN_SW_TAGS is not set\nCONFIG_KASAN_HW_TAGS\u003dy\nCONFIG_KASAN_VMALLOC\u003dy\n# CONFIG_KASAN_KUNIT_TEST is not set\n```\n\nSo, I doubt there must be something wrong with current merged config or kleaf.\n\nCan you double verify from your end?",
      "parentUuid": "76e519bd_94a72861",
      "range": {
        "startLine": 300,
        "startChar": 0,
        "endLine": 301,
        "endChar": 39
      },
      "revId": "8b9841be98666b81193d007e1f16b5d4440bcbb9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a847ceca_9a3e2b45",
        "filename": "kleaf/impl/kernel_config.bzl",
        "patchSetId": 9
      },
      "lineNbr": 301,
      "author": {
        "id": 1905021
      },
      "writtenOn": "2023-06-06T01:59:36Z",
      "side": 1,
      "message": "I see, so kasan\u003doff cmdline disabled it.\n\nSo we still need these two lines to disable KASAN in KCSAN change, otherwise, KCSAN can\u0027t be enabled.",
      "parentUuid": "ece05dba_8c195adf",
      "range": {
        "startLine": 300,
        "startChar": 0,
        "endLine": 301,
        "endChar": 39
      },
      "revId": "8b9841be98666b81193d007e1f16b5d4440bcbb9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8a5152cf_8592ed17",
        "filename": "kleaf/impl/kernel_config.bzl",
        "patchSetId": 9
      },
      "lineNbr": 301,
      "author": {
        "id": 1905021
      },
      "writtenOn": "2023-06-07T02:30:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a847ceca_9a3e2b45",
      "range": {
        "startLine": 300,
        "startChar": 0,
        "endLine": 301,
        "endChar": 39
      },
      "revId": "8b9841be98666b81193d007e1f16b5d4440bcbb9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2ad9e0d3_671cec87",
        "filename": "kleaf/impl/kernel_config.bzl",
        "patchSetId": 9
      },
      "lineNbr": 314,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2023-05-30T22:04:15Z",
      "side": 1,
      "message": "this has nothing to do with this change, actually, and should not be here.",
      "range": {
        "startLine": 313,
        "startChar": 0,
        "endLine": 314,
        "endChar": 44
      },
      "revId": "8b9841be98666b81193d007e1f16b5d4440bcbb9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b9b332e5_1eb8d0ec",
        "filename": "kleaf/impl/kernel_config.bzl",
        "patchSetId": 9
      },
      "lineNbr": 314,
      "author": {
        "id": 1905021
      },
      "writtenOn": "2023-05-31T01:35:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2ad9e0d3_671cec87",
      "range": {
        "startLine": 313,
        "startChar": 0,
        "endLine": 314,
        "endChar": 44
      },
      "revId": "8b9841be98666b81193d007e1f16b5d4440bcbb9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5ad416d1_72cfe310",
        "filename": "kleaf/tests/kernel_config_test/kernel_config_option_test.bzl",
        "patchSetId": 9
      },
      "lineNbr": 383,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-05-30T19:19:52Z",
      "side": 1,
      "message": "You need kcsan here.\n\nPlease check if the kleaf tests pass by `tools/bazel test //build/kernel/kleaf:quick_tests`.",
      "revId": "8b9841be98666b81193d007e1f16b5d4440bcbb9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2c7e0fe0_1bb5177f",
        "filename": "kleaf/tests/kernel_config_test/kernel_config_option_test.bzl",
        "patchSetId": 9
      },
      "lineNbr": 383,
      "author": {
        "id": 1905021
      },
      "writtenOn": "2023-05-31T01:35:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5ad416d1_72cfe310",
      "revId": "8b9841be98666b81193d007e1f16b5d4440bcbb9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}