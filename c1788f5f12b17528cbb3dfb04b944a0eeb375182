{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d8366590_affda22f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-02-20T19:11:56Z",
      "side": 1,
      "message": "Don\u0027t forget internal Pixel branches and partner branches. This change might need to be removed fro the topic for now.",
      "revId": "c1788f5f12b17528cbb3dfb04b944a0eeb375182",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7fae4638_0726d68a",
        "filename": "kleaf/bzlmod/bazel.MODULE.bazel",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-02-20T19:18:27Z",
      "side": 1,
      "message": "This should probably be a bazel_dep + local_path_override: https://registry.bazel.build/modules/zlib. Otherwise, we have a repository named `@@kleaf~override~...~zlib` and other projects may load a separate `@@zlib~1.3.1`, which will cause confusion. (Also \n\nNote that it needs to apply a few patches to add MODULE.bazel / BUILD: https://github.com/bazelbuild/bazel-central-registry/tree/main/modules/zlib/1.3.1/patches\n\nbut I think we can just apply them manually for now. (This is related to https://github.com/bazelbuild/bazel/issues/21307 )",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 59,
        "endChar": 1
      },
      "revId": "c1788f5f12b17528cbb3dfb04b944a0eeb375182",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a20b35a_508daae5",
        "filename": "kleaf/bzlmod/bazel.MODULE.bazel",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-02-20T19:19:05Z",
      "side": 1,
      "message": "Ignore the `(Also` at the end of the first paragraph",
      "parentUuid": "7fae4638_0726d68a",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 59,
        "endChar": 1
      },
      "revId": "c1788f5f12b17528cbb3dfb04b944a0eeb375182",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f7f1a9e8_3d4adc8e",
        "filename": "kleaf/bzlmod/bazel.MODULE.bazel",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-02-23T16:14:16Z",
      "side": 1,
      "message": "The zlib in Android is a (Chrome) fork of the upstream version. I took the BUILD.bazel file from the BCR 1.3.1 version and made it work with the fork. Hence, the separate zlib.BUILD file.",
      "parentUuid": "7a20b35a_508daae5",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 59,
        "endChar": 1
      },
      "revId": "c1788f5f12b17528cbb3dfb04b944a0eeb375182",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0b297787_7f57c39c",
        "filename": "kleaf/bzlmod/bazel.MODULE.bazel",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-02-23T19:21:23Z",
      "side": 1,
      "message": "But we can also apply the two patches (adding BUILD.bazel and MODULE.bazel) to the repository directly, right?",
      "parentUuid": "f7f1a9e8_3d4adc8e",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 59,
        "endChar": 1
      },
      "revId": "c1788f5f12b17528cbb3dfb04b944a0eeb375182",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "346ab5ef_f34b793f",
        "filename": "kleaf/bzlmod/bazel.MODULE.bazel",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-02-23T19:26:12Z",
      "side": 1,
      "message": "Without https://github.com/bazelbuild/bazel/issues/21307 , the only option is to apply the two patches directly.\n\nI insisted on applying the two patches instead of using `new_kleaf_local_repository` because `new_kleaf_local_repository` only instantiates a repository, but not treating it as a full Bazel module. Any dependencies that zlib might have will require some additional macro calls in the WORKSPACE file. If we add it as a Bazel module:\n\n- Any dependencies that zlib has will be resolved automatically\n- We have one more optional dependency of `groups\u003dddk` projects. That is, in the future, we could create a `groups\u003dddk-bazel-modules` group that contains zlib, rules_X, etc.; these projects are not necessarily checked out from AOSP, but can also be checked out from the Bazel central registry directly.",
      "parentUuid": "0b297787_7f57c39c",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 59,
        "endChar": 1
      },
      "revId": "c1788f5f12b17528cbb3dfb04b944a0eeb375182",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "37cadb67_87451a80",
        "filename": "kleaf/bzlmod/bazel.MODULE.bazel",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-05-07T15:51:52Z",
      "side": 1,
      "message": "I decided to stick to the current approach. While the zlib-1.3.1 upstream version is similar, the Android fork is not the same and we should not supply it for users that expect zlib-1.3.1.",
      "parentUuid": "346ab5ef_f34b793f",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 59,
        "endChar": 1
      },
      "revId": "c1788f5f12b17528cbb3dfb04b944a0eeb375182",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ff61340_4cdb4819",
        "filename": "kleaf/workspace.bzl",
        "patchSetId": 1
      },
      "lineNbr": 153,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-02-20T19:18:27Z",
      "side": 1,
      "message": "nit: this should go to L109, just like other projects with a BUILD file.\n\nI know it doesn\u0027t have a BUILD file right now, but see my other comment",
      "range": {
        "startLine": 147,
        "startChar": 0,
        "endLine": 153,
        "endChar": 0
      },
      "revId": "c1788f5f12b17528cbb3dfb04b944a0eeb375182",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cbc4626c_551a87d5",
        "filename": "kleaf/workspace.bzl",
        "patchSetId": 1
      },
      "lineNbr": 153,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-05-07T15:51:52Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "6ff61340_4cdb4819",
      "range": {
        "startLine": 147,
        "startChar": 0,
        "endLine": 153,
        "endChar": 0
      },
      "revId": "c1788f5f12b17528cbb3dfb04b944a0eeb375182",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4862316a_51d47e04",
        "filename": "kleaf/zlib.BUILD",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-02-20T19:18:27Z",
      "side": 1,
      "message": "not hermetic ðŸ˜ž\n\nBut if we are not using this target, it is probably fine",
      "range": {
        "startLine": 65,
        "startChar": 4,
        "endLine": 65,
        "endChar": 19
      },
      "revId": "c1788f5f12b17528cbb3dfb04b944a0eeb375182",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3bc0c2f3_4d2525f8",
        "filename": "kleaf/zlib.BUILD",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-02-23T16:14:16Z",
      "side": 1,
      "message": "I can\u0027t spot the issue ...\n\nAnd any fix should go to the BCR version where I got this from.",
      "parentUuid": "4862316a_51d47e04",
      "range": {
        "startLine": 65,
        "startChar": 4,
        "endLine": 65,
        "endChar": 19
      },
      "revId": "c1788f5f12b17528cbb3dfb04b944a0eeb375182",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8b8d9dc9_868f51a2",
        "filename": "kleaf/zlib.BUILD",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-02-23T19:21:23Z",
      "side": 1,
      "message": "As long as we don\u0027t use this target anywhere, this is fine.",
      "parentUuid": "3bc0c2f3_4d2525f8",
      "range": {
        "startLine": 65,
        "startChar": 4,
        "endLine": 65,
        "endChar": 19
      },
      "revId": "c1788f5f12b17528cbb3dfb04b944a0eeb375182",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5c438e0e_480e2fb9",
        "filename": "kleaf/zlib.BUILD",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-05-07T15:51:52Z",
      "side": 1,
      "message": "Obsolete.",
      "parentUuid": "8b8d9dc9_868f51a2",
      "range": {
        "startLine": 65,
        "startChar": 4,
        "endLine": 65,
        "endChar": 19
      },
      "revId": "c1788f5f12b17528cbb3dfb04b944a0eeb375182",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}