{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "8f56e0a4_4cecb3a9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1688863
      },
      "writtenOn": "2021-01-29T17:48:50Z",
      "side": 1,
      "message": "Hello Elliot,\n\nI tried this patch with setting GKI_BUILD_CONFIG, but I wound up with this odd infinite looping behavior during build.config loading - I\u0027ll look into that more on my end later today.",
      "revId": "5dca0c989cf9f94a02e6453c0ce6d03a5d931cd0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1c9c9ba1_add76c4a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1688863
      },
      "writtenOn": "2021-01-29T21:41:37Z",
      "side": 1,
      "message": "Hello,\n\nRight, so what I\u0027m observing is that, when I pass in GKI_BUILD_CONFIG, the build script seems to constantly nest additional gki_kernel/ dirs on the PATH, e.g.\n\n/path/to/my/build/out/branch/gki_kernel/gki_kernel/gki_kernel/gki_kernel/gki_kernel/gki_kernel/common/host_tools\n\nI presume this is happening in the ( env -i bash -c \"source ${OLD_ENVIRONMENT}; rm -f ${OLD_ENVIRONMENT}; export ${GKI_ENVIRON}; ./build/build.sh\" ) line. Could you give a sample invocation for what you\u0027ve been testing with?",
      "parentUuid": "8f56e0a4_4cecb3a9",
      "revId": "5dca0c989cf9f94a02e6453c0ce6d03a5d931cd0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ffb162c8_1a5553c6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1539256
      },
      "writtenOn": "2021-01-29T21:46:06Z",
      "side": 1,
      "message": "Ah, so I have added GKI_BUILD_CONFIG in a build.config file. I see now that it would fail if it is passed as an environment variable.\n\n  GKI_BUILD_CONFIG\u003dcommon/build.config.gki.aarch64 BUILD_CONFIG\u003ddevice_kernel/build.config.db845c ./build/build.sh\n\nwouldn\u0027t work, but if you add the GKI_BUILD_CONFIG\u003d into build.config.db845c it would work.\n\nI\u0027ll update gerrit to ensure GKI_BUILD_CONFIG\u003d doesn\u0027t get nested in the \"pass by environment\" use case.",
      "parentUuid": "1c9c9ba1_add76c4a",
      "revId": "5dca0c989cf9f94a02e6453c0ce6d03a5d931cd0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3fc53314_12d3dce4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1539256
      },
      "writtenOn": "2021-01-30T06:09:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ffb162c8_1a5553c6",
      "revId": "5dca0c989cf9f94a02e6453c0ce6d03a5d931cd0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4162a9d5_aa3c8dab",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1688863
      },
      "writtenOn": "2021-02-01T20:54:51Z",
      "side": 1,
      "message": "Hello Elliot,\n\nTried your newest patchset. Still observing something odd - I tried adding GKI_BUILD_CONFIG\u003d${ROOT_DIR}/common/build.config.gki.aarch64 to my device_kernel/build.config.db845c, and I\u0027m still seeing that recursive behavior when doing BUILD_CONFIG\u003ddevice_kernel/build.config.db845c ./build/build.sh.\n\nAdditionally, when I run GKI_BUILD_CONFIG\u003dcommon/build.config.gki.aarch64 BUILD_CONFIG\u003ddevice_kernel/build.config.db845c ./build/build.sh, I noticed that in out/, it seems that in out/device_kernel_branchname/gki_kernel, instead of a common/ dir, it looks to be a device_kernel/ dir.\n\nIn both cases, I\u0027m running this command from my build\u0027s ROOT_DIR - am I doing something wrong on my end?",
      "parentUuid": "3fc53314_12d3dce4",
      "revId": "5dca0c989cf9f94a02e6453c0ce6d03a5d931cd0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "284f3d31_998eceaf",
        "filename": "build.sh",
        "patchSetId": 2
      },
      "lineNbr": 890,
      "author": {
        "id": 1539256
      },
      "writtenOn": "2021-01-28T21:57:09Z",
      "side": 1,
      "message": "Verified that moving GKI_DIST_DIR copying up here allows kernel/build to catch case where vendor module uses symbol not exported by GKI kernel. It can\u0027t catch CRC errors because depmod doesn\u0027t compare them.",
      "revId": "5dca0c989cf9f94a02e6453c0ce6d03a5d931cd0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}