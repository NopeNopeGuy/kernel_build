{
  "comments": [
    {
      "key": {
        "uuid": "3d30ea35_1042dff2",
        "filename": "build.sh",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2020-04-24T15:23:05Z",
      "side": 1,
      "message": "I would probably add the KMI suffix or prefix to indicate the relationship to the previous option",
      "range": {
        "startLine": 157,
        "startChar": 4,
        "endLine": 157,
        "endChar": 25
      },
      "revId": "8d30e204ef4a0c0817d1fb0115d4d37834d3fe5f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0663760a_75bdc4f5",
        "filename": "build.sh",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1569742
      },
      "writtenOn": "2020-04-24T15:35:41Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "3d30ea35_1042dff2",
      "range": {
        "startLine": 157,
        "startChar": 4,
        "endLine": 157,
        "endChar": 25
      },
      "revId": "8d30e204ef4a0c0817d1fb0115d4d37834d3fe5f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "14d35d05_0050a267",
        "filename": "build.sh",
        "patchSetId": 1
      },
      "lineNbr": 364,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2020-04-24T15:29:11Z",
      "side": 1,
      "message": "This needs to be DIST_DIR",
      "range": {
        "startLine": 364,
        "startChar": 38,
        "endLine": 364,
        "endChar": 45
      },
      "revId": "8d30e204ef4a0c0817d1fb0115d4d37834d3fe5f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "639457da_0e77f51a",
        "filename": "build.sh",
        "patchSetId": 1
      },
      "lineNbr": 364,
      "author": {
        "id": 1569742
      },
      "writtenOn": "2020-04-24T15:35:28Z",
      "side": 1,
      "message": "Well, I chose OUT_DIR on purpose -- vmlinux is not guaranteed to be present in DIST_DIR (it isn\u0027t when using build.config.db845c for instance). And by doing that in OUT_DIR, I can \u0027fail\u0027 before doing the module copy to DIST_DIR as well.",
      "parentUuid": "14d35d05_0050a267",
      "range": {
        "startLine": 364,
        "startChar": 38,
        "endLine": 364,
        "endChar": 45
      },
      "revId": "8d30e204ef4a0c0817d1fb0115d4d37834d3fe5f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d29b1df5_9e5acbb6",
        "filename": "build.sh",
        "patchSetId": 1
      },
      "lineNbr": 364,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2020-04-24T17:29:51Z",
      "side": 1,
      "message": "the problem with OUT_DIR is that it can contain all sorts of leftover modules (such as from a former build of another config or another architecture). For build_abi.sh we drop out_abi/ completely to avoid this. I am not sure whether DIST_DIR is cleaned before populating it. but it should.\nAt least we should not search for *.ko in OUT_DIR.",
      "parentUuid": "639457da_0e77f51a",
      "range": {
        "startLine": 364,
        "startChar": 38,
        "endLine": 364,
        "endChar": 45
      },
      "revId": "8d30e204ef4a0c0817d1fb0115d4d37834d3fe5f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4b09ee3_b2dd0a29",
        "filename": "build.sh",
        "patchSetId": 1
      },
      "lineNbr": 364,
      "author": {
        "id": 1569742
      },
      "writtenOn": "2020-04-27T08:11:45Z",
      "side": 1,
      "message": "Right, that\u0027s a good point, though I think DIST_DIR can have the same issue. The best solution might be to get the list of modules from modules.order, or even to get the full list of symbols from Module.symvers directly. I\u0027ll have another look ðŸ˜Š\nThanks for the review!",
      "parentUuid": "d29b1df5_9e5acbb6",
      "range": {
        "startLine": 364,
        "startChar": 38,
        "endLine": 364,
        "endChar": 45
      },
      "revId": "8d30e204ef4a0c0817d1fb0115d4d37834d3fe5f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d74413b3_292cfa40",
        "filename": "build.sh",
        "patchSetId": 1
      },
      "lineNbr": 364,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2020-04-27T08:18:09Z",
      "side": 1,
      "message": "Yes, DIST_DIR can have the same issue as of today. Though it would be reasonable to drop DIST_DIR actually without losing the incremental build in OUT_DIR. And your patch would still work then. Long story short: we should probably drop DIST_DIR anyway before the dist step.",
      "parentUuid": "c4b09ee3_b2dd0a29",
      "range": {
        "startLine": 364,
        "startChar": 38,
        "endLine": 364,
        "endChar": 45
      },
      "revId": "8d30e204ef4a0c0817d1fb0115d4d37834d3fe5f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8da8baf7_ffa8e0cb",
        "filename": "build.sh",
        "patchSetId": 1
      },
      "lineNbr": 364,
      "author": {
        "id": 1569742
      },
      "writtenOn": "2020-04-27T08:29:12Z",
      "side": 1,
      "message": "Right, but now I think this should be independent from this patch. Using Module.symvers should be _much_ nicer as it gives me the list of symbols I want directly. That removes the dependency on readelf, and also enables me to fail early (that is, before copying the modules). I\u0027ll post an updated version soon-ish.",
      "parentUuid": "d74413b3_292cfa40",
      "range": {
        "startLine": 364,
        "startChar": 38,
        "endLine": 364,
        "endChar": 45
      },
      "revId": "8d30e204ef4a0c0817d1fb0115d4d37834d3fe5f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}