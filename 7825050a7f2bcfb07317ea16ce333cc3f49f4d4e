{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "90717342_015ffa2d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-05-17T21:27:50Z",
      "side": 1,
      "message": "Overall implementation-wise comment: I think the $(realpath) evaluation should happen inside `extract_git_metadata` so it is more generic. That is, if you have other symlinks to module directories in the repository for scmversion, evaluating extract_git_metadata on those symlinks would also work.\n\nPolicy-wise comments will be posted in the bug instead.",
      "revId": "7825050a7f2bcfb07317ea16ce333cc3f49f4d4e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d17531d8_c70b7ef0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1962616
      },
      "writtenOn": "2024-05-20T03:05:09Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "90717342_015ffa2d",
      "revId": "7825050a7f2bcfb07317ea16ce333cc3f49f4d4e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1e2b4bbf_df397305",
        "filename": "_setup_env.sh",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-05-17T21:27:50Z",
      "side": 1,
      "message": "`real_root_dir` may or may not be defined. Would `${ROOT_DIR}` work here?",
      "range": {
        "startLine": 78,
        "startChar": 50,
        "endLine": 78,
        "endChar": 63
      },
      "revId": "7825050a7f2bcfb07317ea16ce333cc3f49f4d4e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "533417d5_75b33e04",
        "filename": "_setup_env.sh",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-05-17T21:27:50Z",
      "side": 1,
      "message": "Instead of `export`-ing this variable, consider evaluating this as part of extract_git_metadata instead. This avoids creating too many environment variables (which is already a big surface)",
      "range": {
        "startLine": 78,
        "startChar": 0,
        "endLine": 78,
        "endChar": 6
      },
      "revId": "7825050a7f2bcfb07317ea16ce333cc3f49f4d4e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7aaf238e_d664ef6f",
        "filename": "_setup_env.sh",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-05-17T21:27:50Z",
      "side": 1,
      "message": "This shouldn\u0027t be `basename` but rather\n\n`$(realpath --relative-to ${ROOT_DIR} ${ROOT_DIR}/${KERNEL_DIR})`\n\n... because KERNEL_DIR may contain `/`.",
      "range": {
        "startLine": 78,
        "startChar": 23,
        "endLine": 78,
        "endChar": 80
      },
      "revId": "7825050a7f2bcfb07317ea16ce333cc3f49f4d4e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e013dc91_87ef7eca",
        "filename": "_setup_env.sh",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1962616
      },
      "writtenOn": "2024-05-20T03:05:09Z",
      "side": 1,
      "message": "In ROOT_DIR, there\u0027s no symlink between KERNEL_DIR(\u003dcommon) and real kernel dir(\u003dkernel-6.6). so, ROOT_DIR is not working here.",
      "parentUuid": "1e2b4bbf_df397305",
      "range": {
        "startLine": 78,
        "startChar": 50,
        "endLine": 78,
        "endChar": 63
      },
      "revId": "7825050a7f2bcfb07317ea16ce333cc3f49f4d4e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "998ee05e_b3ec66e8",
        "filename": "build_utils.sh",
        "patchSetId": 2
      },
      "lineNbr": 972,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-05-17T21:36:34Z",
      "side": 1,
      "message": "perhaps:\n\n```\nfunction extract_git_metadata() {\n  local ret\u003d$(_extract_git_metadata_internal \"$@\")\n  if [[ -n \"${ret}\" ]]; then\n      echo \"${ret}\"\n      return 0\n  fi\n  \n  local map\u003d$1\n  local git_project_candidate\u003d$2\n  local what\u003d$3\n  git_project_candidate\u003d$(realpath --relative-to \"${PWD}\" \"${git_project_candidate}\")\n  ret\u003d$(_extract_git_metadata_internal \"$@\")\n  if [[ -n \"${ret}\" ]]; then\n      echo \"${ret}\"\n      return 0\n  fi\n  echo \"WARNING: Can\u0027t determine $what for $2\" \u003e\u00262\n}\n\nfunction _extract_git_metadata_internal() {\n  # The original implementation\n}\n```",
      "revId": "7825050a7f2bcfb07317ea16ce333cc3f49f4d4e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b2d97f19_de3ab610",
        "filename": "build_utils.sh",
        "patchSetId": 2
      },
      "lineNbr": 972,
      "author": {
        "id": 1962616
      },
      "writtenOn": "2024-05-20T04:07:40Z",
      "side": 1,
      "message": "I don\u0027t think I can access symbolic link(\u003dcommon) in here,\nbecause ROOT_DIR has no symbolic link when this function called.",
      "parentUuid": "998ee05e_b3ec66e8",
      "revId": "7825050a7f2bcfb07317ea16ce333cc3f49f4d4e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}