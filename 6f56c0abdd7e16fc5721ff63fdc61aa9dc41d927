{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "44cc494a_fbe5b6e8",
        "filename": "kleaf/kernel.bzl",
        "patchSetId": 7
      },
      "lineNbr": 3757,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2022-03-23T17:28:17Z",
      "side": 1,
      "message": "_abi_diff_legacy",
      "range": {
        "startLine": 3757,
        "startChar": 27,
        "endLine": 3757,
        "endChar": 36
      },
      "revId": "6f56c0abdd7e16fc5721ff63fdc61aa9dc41d927",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b1e3cbe4_dea2a075",
        "filename": "kleaf/kernel.bzl",
        "patchSetId": 7
      },
      "lineNbr": 3757,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-03-23T19:45:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "44cc494a_fbe5b6e8",
      "range": {
        "startLine": 3757,
        "startChar": 27,
        "endLine": 3757,
        "endChar": 36
      },
      "revId": "6f56c0abdd7e16fc5721ff63fdc61aa9dc41d927",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1464c852_6ec0ffa7",
        "filename": "kleaf/kernel.bzl",
        "patchSetId": 7
      },
      "lineNbr": 3763,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2022-03-23T17:28:17Z",
      "side": 1,
      "message": "_abi_diff",
      "range": {
        "startLine": 3763,
        "startChar": 27,
        "endLine": 3763,
        "endChar": 40
      },
      "revId": "6f56c0abdd7e16fc5721ff63fdc61aa9dc41d927",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3b983bca_ac583b0d",
        "filename": "kleaf/kernel.bzl",
        "patchSetId": 7
      },
      "lineNbr": 3763,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-03-23T19:45:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1464c852_6ec0ffa7",
      "range": {
        "startLine": 3763,
        "startChar": 27,
        "endLine": 3763,
        "endChar": 40
      },
      "revId": "6f56c0abdd7e16fc5721ff63fdc61aa9dc41d927",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9c19f05d_e17eeeea",
        "filename": "kleaf/kernel.bzl",
        "patchSetId": 7
      },
      "lineNbr": 3767,
      "author": {
        "id": 1625880
      },
      "writtenOn": "2022-03-23T16:16:47Z",
      "side": 1,
      "message": "Originally I was just going to say: Would it make sense to split out the diff reporting into separate `blaze run` actions?\n\nSTG diff reporting actually generates 4+1 reports and this takes ~1s. The 4 reports are generated with one invocation. The 1 report is generated by textual post-processing of 1 of the 4 reports. The overall exit code is determined - this is a workaround - by the post-processing.\n\nlibabigail diff reporting generates 1 raw and 1 post-processed report (and at an earlier time I might have argued for generating more variations) and this takes a variable amount of time.\n\nGiven that we will retire `abidiff` it may make more sense to insulate the Bazel from some of these things (which will also happen consistently fast).\n\nPerhaps we should add a `diff_abi` mode which does everything and owns the decision-making about whether a build should fail?\n\nI see the ideal outcome as something like:\n\n```\n$ blaze run ...diff...\n[stderr] diff failed, see reports in files blah\n[exit code 1]\n```\n\n```\n$ blaze run ...diff...\n[exit code 0]\n```\n\nand Bazel knows nothing about the report file names.\n\nOr is there a concern that \"generating\" the reports is costly and therefore they should be cached by build system?",
      "range": {
        "startLine": 3762,
        "startChar": 0,
        "endLine": 3767,
        "endChar": 9
      },
      "revId": "6f56c0abdd7e16fc5721ff63fdc61aa9dc41d927",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a6820d5f_79130d86",
        "filename": "kleaf/kernel.bzl",
        "patchSetId": 7
      },
      "lineNbr": 3767,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-03-23T19:36:37Z",
      "side": 1,
      "message": "What you say is definitely doable -- `bazel run`-ing a diff target prints the report.\n\nI was planning to do this in a different CL to say that I am implementing the --print_report option in build_abi.sh.\n\nIn fact, according to Matthias\u0027s comment, I was even going to create a template file with git commit messages.\n\nDoes that sound good to you?",
      "parentUuid": "9c19f05d_e17eeeea",
      "range": {
        "startLine": 3762,
        "startChar": 0,
        "endLine": 3767,
        "endChar": 9
      },
      "revId": "6f56c0abdd7e16fc5721ff63fdc61aa9dc41d927",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}