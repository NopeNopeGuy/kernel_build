{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2c47fb5d_2d0c4c7b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1905021
      },
      "writtenOn": "2023-05-31T01:35:56Z",
      "side": 1,
      "message": "Tested by\n```\ntools/bazel run //common:kernel_aarch64_dist\ntools/bazel test //build/kernel/kleaf:quick_tests\n```",
      "revId": "92bd6eec27c205270165a738916b030ab815d0ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ebdfa3df_594bb25c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1905021
      },
      "writtenOn": "2023-06-01T08:52:46Z",
      "side": 1,
      "message": "any further comment?",
      "revId": "92bd6eec27c205270165a738916b030ab815d0ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c19aaba8_12fc6ceb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1905021
      },
      "writtenOn": "2023-06-01T23:55:29Z",
      "side": 1,
      "message": "Is there a way to see what the error log is? As I can\u0027t open the link.",
      "revId": "92bd6eec27c205270165a738916b030ab815d0ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aba8c051_c9f0e2a5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-06-02T17:13:42Z",
      "side": 1,
      "message": "Did you run `bazel test //build/kernel/kleaf:quick_tests` locally on android14-5.15 branch? It is failing on that branch.\n\nThe test that fails is\n\n```\n__main__.CompareTest#test_all (actual\u003dPosixPath(\u0027build/kernel/kleaf/tests/kernel_config_test/kernel_config_option_test_suite_kcsan_aarch64_test_actual/kcsan_config\u0027), expected\u003dPosixPath(\u0027build/kernel/kleaf/tests/kernel_config_test/data/kcsan_config\u0027))\n```\n\nThe error message is\n\n```\nCounter({\u0027CONFIG_KCSAN\u003dy\u0027: 1}) is not false : build/kernel/kleaf/tests/kernel_config_test/kernel_config_option_test_suite_kcsan_aarch64_test_actual/kcsan_config does not contain all lines from build/kernel/kleaf/tests/kernel_config_test/data/kcsan_config, missing\nCONFIG_KCSAN\u003dy\nTraceback (most recent call last):\n  File \"/buildbot/src/android/common-android14-5.15/out/bazel/output_user_root/aeb46c275a0698cff4a6f516b8783221/sandbox/linux-sandbox/716/execroot/__main__/bazel-out/k8-fastbuild/bin/build/kernel/kleaf/tests/kernel_config_test/kernel_config_option_test_suite_kcsan_aarch64_test.runfiles/__main__/build/kernel/kleaf/tests/utils/contain_lines_test.py\", line 98, in test_all\n    self._assert_contain_lines(actual\u003dactual_file, expected\u003dexpected_file)\n  File \"/buildbot/src/android/common-android14-5.15/out/bazel/output_user_root/aeb46c275a0698cff4a6f516b8783221/sandbox/linux-sandbox/716/execroot/__main__/bazel-out/k8-fastbuild/bin/build/kernel/kleaf/tests/kernel_config_test/kernel_config_option_test_suite_kcsan_aarch64_test.runfiles/__main__/build/kernel/kleaf/tests/utils/contain_lines_test.py\", line 106, in _assert_contain_lines\n    self.assertFalse(diff,\nAssertionError: Counter({\u0027CONFIG_KCSAN\u003dy\u0027: 1}) is not false : build/kernel/kleaf/tests/kernel_config_test/kernel_config_option_test_suite_kcsan_aarch64_test_actual/kcsan_config does not contain all lines from build/kernel/kleaf/tests/kernel_config_test/data/kcsan_config, missing\nCONFIG_KCSAN\u003dy\n```\n\nIs KCSAN supported on android14-5.15?",
      "parentUuid": "c19aaba8_12fc6ceb",
      "revId": "92bd6eec27c205270165a738916b030ab815d0ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cc32811a_82f119b7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-06-02T17:15:47Z",
      "side": 1,
      "message": "Looks like it is supported since 5.8. But for some reason, the test thinks that kcsan cannot be enabled on that branch with --kcsan.\n\nLet me know if you need my help on debugging this.",
      "parentUuid": "aba8c051_c9f0e2a5",
      "revId": "92bd6eec27c205270165a738916b030ab815d0ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c906fe7a_07714d12",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1905021
      },
      "writtenOn": "2023-06-05T12:52:51Z",
      "side": 1,
      "message": "Tried local now on 5.15, I can see the same error.\nBut I\u0027m not sure how to fix it, is there any condition checker in kleaf?\n\n\nI guess in \"kleaf/tests/kernel_config_test/kernel_config_option_test.bzl\" it needs to get kernel version and if \u003e 5.15, then enable _kcsan_test. But how to get kernel version in that file then?\n\nAny suggestion is preferred.",
      "parentUuid": "cc32811a_82f119b7",
      "revId": "92bd6eec27c205270165a738916b030ab815d0ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "95eebc07_5ff03396",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1905021
      },
      "writtenOn": "2023-06-05T14:13:07Z",
      "side": 1,
      "message": "Or should I just remove these kcsan_test?",
      "parentUuid": "c906fe7a_07714d12",
      "revId": "92bd6eec27c205270165a738916b030ab815d0ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6a5ea7ad_32dffe66",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2023-06-05T15:07:35Z",
      "side": 1,
      "message": "If the feature is supported with with 5.8, then this should work on 5.15, right? So, please do not drop the test as it indicates that the set of config options enabled/disabled are not sufficient on 5.15 to enable KCSAN.",
      "parentUuid": "95eebc07_5ff03396",
      "revId": "92bd6eec27c205270165a738916b030ab815d0ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6bd3a165_06696de9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1961395
      },
      "writtenOn": "2023-06-06T14:15:48Z",
      "side": 1,
      "message": "IIUIC it\u0027s supported in `android14-5.15`, I noticed that in the generated configs, one of the diffs is `CONFIG_HAVE_ARCH_KCSAN\u003dy` \n\n* For `android14-6.1` is [enabled](https://android.git.corp.google.com/kernel/common/+/refs/heads/android14-6.1/arch/arm64/Kconfig#164).\n* For [`android14-5.15`](https://android.git.corp.google.com/kernel/common/+/refs/heads/android14-5.15/arch/arm64/Kconfig) is not.\n\nIt seems that [this is the patch](https://lore.kernel.org/all/20211129145732.27000-1-wangkefeng.wang@huawei.com/) where it was added.",
      "parentUuid": "6a5ea7ad_32dffe66",
      "revId": "92bd6eec27c205270165a738916b030ab815d0ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b054ebcc_15bbd91c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1961395
      },
      "writtenOn": "2023-06-06T14:16:44Z",
      "side": 1,
      "message": "errata: It\u0027s **not** supported in `android14-5.15`.",
      "parentUuid": "6bd3a165_06696de9",
      "revId": "92bd6eec27c205270165a738916b030ab815d0ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f5d68be_dfcd7c31",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1961395
      },
      "writtenOn": "2023-06-06T14:24:36Z",
      "side": 1,
      "message": "Fixing links:\n* [`android14-6.1` enables `HAVE_ARCH_KCSAN`](https://android.googlesource.com/kernel/common/+/refs/heads/android14-6.1/arch/arm64/Kconfig#164)\n* [` android14-5.15` not](https://android.googlesource.com/kernel/common/+/refs/heads/android14-5.15/arch/arm64/Kconfig)",
      "parentUuid": "b054ebcc_15bbd91c",
      "revId": "92bd6eec27c205270165a738916b030ab815d0ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}