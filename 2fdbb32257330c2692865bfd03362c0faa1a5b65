{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d9913cad_cc84ef24",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-07-17T23:23:11Z",
      "side": 1,
      "message": "This does not work. The build number is not embedded into the string correctly.",
      "revId": "2fdbb32257330c2692865bfd03362c0faa1a5b65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c4568e41_824d405a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-07-17T23:27:14Z",
      "side": 1,
      "message": "It does not work because the map is expected to contain PATH:VERSION PATH:VERSION separated by strings. I think it needs to be refactored so that spaces can be part of the version as well.",
      "parentUuid": "d9913cad_cc84ef24",
      "revId": "2fdbb32257330c2692865bfd03362c0faa1a5b65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "304abe81_6617ab81",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-07-18T00:06:36Z",
      "side": 1,
      "message": "@maennich@google.com\n\nI think this will require some non-trivial upstream changes that allows spaces in paths. The first error (after fixing Kleaf errors CL:2660379) I hit is this line:\n\nhttps://cs.android.com/android/kernel/superproject/+/common-android-mainline:common/Makefile;l\u003d1613;drc\u003dcdef824f3de0e4d03f2e4da7aa0c02849bcadfe2\n\nThe error message is:\n\n```\nERROR: /mnt/sdc/android/kernel/common/BUILD.bazel:51:22: Building kernel (lto\u003ddefault;notrim) @//common:kernel_aarch64 failed: (Exit 2): bash failed: error executing command (from target //common:kernel_aarch64) /bin/bash -c ... (remaining 1 argument skipped)\nln: cannot create symbolic link from \u0027/mnt/sdc/android/kernel/out/bazel/output_user_root/1b6b21355d7d8de5177bf0bcb725bd7f/execroot/__main__/bazel-out/k8-fastbuild/bin/common/kernel_aarch64/staging/lib/modules/6.4.0-mainline-gb862f642f1b6\u0027 to \u0027ab123456/source\u0027: File exists\nmake[1]: *** [/mnt/sdc/android/kernel/common/Makefile:1613: __modinst_pre] Error 1\n```\n\nThe issue is that `$(MODLIB)/source` is not quoted: https://cs.android.com/android/kernel/superproject/+/common-android-mainline:common/Makefile;l\u003d1190;drc\u003dcdef824f3de0e4d03f2e4da7aa0c02849bcadfe2\n\nI think that, and all other variables where `KERNELRELEASE` is referred to, needs to be quoted.",
      "parentUuid": "c4568e41_824d405a",
      "revId": "2fdbb32257330c2692865bfd03362c0faa1a5b65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "63caa9a9_6b33b1bc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-07-18T00:13:00Z",
      "side": 1,
      "message": "Looking at the banner, here are all the things that participates in the version string:\n\nhttps://cs.android.com/android/kernel/superproject/+/common-android-mainline:common/init/version-timestamp.c;l\u003d29;drc\u003db409ea4534204d4e6da3017d8713ce338f44b489\n\nAmong them, KBUILD_BUILD_VERSION looks like a possible candidate to embed build numbers. Here\u0027s some description of the variable:\n\nhttps://patchwork.kernel.org/comment/13106401/",
      "parentUuid": "304abe81_6617ab81",
      "revId": "2fdbb32257330c2692865bfd03362c0faa1a5b65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9a01d256_f5c15434",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2023-07-26T13:02:40Z",
      "side": 1,
      "message": "I agree that `KBUILD_BUILD_VERSION` is a good place to put the build number. I suppose we need to make BUILD_NUMBER require to be integer to not break downstream scripts.\n\nBut I can confirm the value would be visible on phones.",
      "parentUuid": "63caa9a9_6b33b1bc",
      "revId": "2fdbb32257330c2692865bfd03362c0faa1a5b65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da68b336_fed00fb0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-07-26T17:33:17Z",
      "side": 1,
      "message": "Unfortunately BUILD_NUMBER could be `P123456` for presubmit builds",
      "parentUuid": "9a01d256_f5c15434",
      "revId": "2fdbb32257330c2692865bfd03362c0faa1a5b65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8108ed2f_76603481",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2023-07-27T09:51:04Z",
      "side": 1,
      "message": "I wonder what happens if we actually leave the characters in. Release builds will always have a numeric value. For presubmits, we might see some parsers stumble upon this value. Let\u0027s give it a full presubmit perhaps.",
      "parentUuid": "da68b336_fed00fb0",
      "revId": "2fdbb32257330c2692865bfd03362c0faa1a5b65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}