{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a3dc4b3f_13628d1f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-10-07T16:29:10Z",
      "side": 1,
      "message": "Please address Matthias comments.",
      "revId": "cce70a39f82c9f9de3178a05d6bfbe6676a0a5e5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6e4a8f27_88e6517b",
        "filename": "kleaf/impl/abi/extracted_symbols.bzl",
        "patchSetId": 7
      },
      "lineNbr": 73,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2022-10-07T12:42:45Z",
      "side": 1,
      "message": "I know it is a hardlink, but why does it need to be copied there anyway? can the tar not use the original file location?",
      "revId": "cce70a39f82c9f9de3178a05d6bfbe6676a0a5e5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e2b53947_8e64f39a",
        "filename": "kleaf/impl/abi/extracted_symbols.bzl",
        "patchSetId": 7
      },
      "lineNbr": 73,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-10-07T19:38:47Z",
      "side": 1,
      "message": "This would be better IMO:\n\n```\nmkdir -p {intermediates_dir}/module_staging_dir\ntar xf {base_modules_archive} -C {intermediates_dir}/module_staging_dir\nfind {intermediates_dir}/module_staging_dir -name \u0027*.ko\u0027 -exec mv -t {intermediates_dir}/ \\\\+\nrm -rf {intermediates_dir}/module_staging_dir\n```\n\n... though, I think there might be cleverer tar tricks that avoid the find \u0026 mv \u0026 extra extraction.",
      "parentUuid": "6e4a8f27_88e6517b",
      "revId": "cce70a39f82c9f9de3178a05d6bfbe6676a0a5e5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac2b1fa5_82a9a464",
        "filename": "kleaf/impl/abi/extracted_symbols.bzl",
        "patchSetId": 7
      },
      "lineNbr": 73,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-10-07T19:42:29Z",
      "side": 1,
      "message": "Does extract_symbols script look into subdirectories? If so, there\u0027s no need to extract to some temp directory then move them; just extract to {intermediates_dir} directly.\n\nTricks you can do to extract only certain files (*.ko) from a tar: https://superuser.com/a/1524665 (I am not sure if --wildcards are supported in the prebuilt tar binary)\n\nTricks you can do to flatten the directory if extract_symbols doesn\u0027t support subdirectories: use --transform",
      "parentUuid": "e2b53947_8e64f39a",
      "revId": "cce70a39f82c9f9de3178a05d6bfbe6676a0a5e5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f395b7ed_73a17b24",
        "filename": "kleaf/impl/abi/extracted_symbols.bzl",
        "patchSetId": 7
      },
      "lineNbr": 76,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2022-10-07T12:42:45Z",
      "side": 1,
      "message": "instead of extracting and copying around (`mv` would be a better option here!), perhaps tell `tar` to extract right to the correct location:\n\n`--transform\u003d\u0027s/.*lib\\///\u0027`  (untested)\n\nor use `--strip-components`. \n\nI am not familiar with the properties of that archive.",
      "range": {
        "startLine": 75,
        "startChar": 1,
        "endLine": 76,
        "endChar": 38
      },
      "revId": "cce70a39f82c9f9de3178a05d6bfbe6676a0a5e5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}