{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "41633187_b5e3a5f8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-04-18T23:24:43Z",
      "side": 1,
      "message": "ping. Lukacs, could you PTAL at this again?",
      "revId": "6388bd50ed4ef9f4f0a7327b5aaa4f78f6bd2b05",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "84ef739f_580c493e",
        "filename": "kleaf/kernel.bzl",
        "patchSetId": 8
      },
      "lineNbr": 1047,
      "author": {
        "id": 1625880
      },
      "writtenOn": "2022-04-20T17:24:12Z",
      "side": 1,
      "message": "This all rather depends on the possible values of KERNEL_DIR.\n\nfoo --\u003e ..\na/b --\u003e ../..\n./ --\u003e ./\n../xx/.. --\u003e ../../..\nfoo.bar --\u003e .....\n\nWhich of these are supported, perhaps add a comment?\n\nAlso the use of s/// for the regex is a bit uncomfortable given that KERNEL_DIR is a path. Perhaps choose a different delimiter?",
      "range": {
        "startLine": 1040,
        "startChar": 0,
        "endLine": 1047,
        "endChar": 57
      },
      "revId": "6388bd50ed4ef9f4f0a7327b5aaa4f78f6bd2b05",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "450aa43a_2e26f687",
        "filename": "kleaf/kernel.bzl",
        "patchSetId": 8
      },
      "lineNbr": 1047,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-04-22T19:07:49Z",
      "side": 1,
      "message": "Yeah if the path contains . and .. then it would break. Sub-paths are fine though.\n\nAck on the regex part; I can do that in the next CL.\n\nThough -- All I want is the reverse of KERNEL_DIR. That is, KERNEL_DIR is ROOT_DIR/KERNEL_DIR relative to ROOT_DIR, and I want ROOT_DIR relative to ROOT_DIR/KERNEL_DIR. I can\u0027t use rel_path because it calls readlink on ROOT_DIR/KERNEL_DIR, which resolves to \u003cworkspace_root\u003e/KERNEL_DIR for local builds.\n\nAny suggestions?",
      "parentUuid": "84ef739f_580c493e",
      "range": {
        "startLine": 1040,
        "startChar": 0,
        "endLine": 1047,
        "endChar": 57
      },
      "revId": "6388bd50ed4ef9f4f0a7327b5aaa4f78f6bd2b05",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f2164dc2_7c96266b",
        "filename": "kleaf/kernel.bzl",
        "patchSetId": 8
      },
      "lineNbr": 1047,
      "author": {
        "id": 1625880
      },
      "writtenOn": "2022-04-25T17:15:03Z",
      "side": 1,
      "message": "So: a/b/c/d and a/b --\u003e ../..\n\nYou could count the path components as you are currently effectively doing. But there are more problems: what if c is a symlink to j/k/l?\n\nAt some point in the code there may be something with a better global view of things. Can you determine the path safely there and pass it through to here?\n\nOr just state the precondition in a comment: each path components must not be `.`, `..` or a symlink. And then document this condition on KERNEL_DIR wherever it originates.",
      "parentUuid": "450aa43a_2e26f687",
      "range": {
        "startLine": 1040,
        "startChar": 0,
        "endLine": 1047,
        "endChar": 57
      },
      "revId": "6388bd50ed4ef9f4f0a7327b5aaa4f78f6bd2b05",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "aa45fcf6_d72fa0b4",
        "filename": "kleaf/kernel.bzl",
        "patchSetId": 8
      },
      "lineNbr": 1047,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-04-26T03:35:10Z",
      "side": 1,
      "message": "I decide to use absolute paths because with relative paths, this problem seems very hard to solve. PTAL.",
      "parentUuid": "f2164dc2_7c96266b",
      "range": {
        "startLine": 1040,
        "startChar": 0,
        "endLine": 1047,
        "endChar": 57
      },
      "revId": "6388bd50ed4ef9f4f0a7327b5aaa4f78f6bd2b05",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}