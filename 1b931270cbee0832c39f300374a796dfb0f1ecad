{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "fe29121f_c7ff1029",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-05-15T22:16:40Z",
      "side": 1,
      "message": "The commit message could explain why that is a good change and also give an example for an `uname -a` invocation.",
      "revId": "1b931270cbee0832c39f300374a796dfb0f1ecad",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "46078005_146382a9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1988540
      },
      "writtenOn": "2024-05-22T00:25:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fe29121f_c7ff1029",
      "revId": "1b931270cbee0832c39f300374a796dfb0f1ecad",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e9a9bd83_1cd87a4a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-05-15T17:55:18Z",
      "side": 1,
      "message": "Implementation wise, aosp/3087649 is correct. But overall, I still do not agree that the 16k flag should show up in uname because it is simply the wrong place to hold this information, IMO.\n\nI won\u0027t block this change by -2\u0027ing it, though. @maennich@google.com PTAL",
      "revId": "1b931270cbee0832c39f300374a796dfb0f1ecad",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6608c305_619c0d02",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-05-15T18:42:08Z",
      "side": 1,
      "message": "This is an experimental build, and we need 16k to be as visible as possible in any logs or metrics. Please +2 and merge as messing with uname should not matter for Android V for a developer option. Please ping me if there is an issue, thanks.",
      "parentUuid": "e9a9bd83_1cd87a4a",
      "revId": "1b931270cbee0832c39f300374a796dfb0f1ecad",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b4649b2c_09e5f9fb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-05-15T22:16:40Z",
      "side": 1,
      "message": "This effectively creates a publicly accessible interface. Even if this is an experimental variant, as soon as we are going to release this (as a developer option) even to a small amount of people, there will be apps, frameworks depending on this string and hence we will not be able to easily drop it from the version string again. (see also https://www.hyrumslaw.com/)\n\nAny debug traces, panic logs etc. should be patched if necessary to contain that information. And otherwise userspace should use regular interfaces like /proc/config.gz to query configuration/features of the kernel.\n\nAs for metrics and tracking: surely we can measure adoption, but doing that as part of the version string would not allow us to ever remove this once 16k is becoming a default.\n\nSo, I concur, that the version string is not the right location to encode this.",
      "parentUuid": "6608c305_619c0d02",
      "revId": "1b931270cbee0832c39f300374a796dfb0f1ecad",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "74787321_e74cbeb8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-05-16T00:30:22Z",
      "side": 1,
      "message": "This is about making sure that log snippets people pass around or other information that includes uname has this information at a high level, to help speed up triage of issues. I\u0027m aware of the potential consequences of this, and I\u0027m not saying I\u0027d be against a permanent 16kB marker.\n\nIf you can tolerate a few bytes, knowing they may be permanent-ish, I\u0027d appreciate it. Otherwise, can we chat about other ways to improve visibility around this? Thanks!",
      "parentUuid": "b4649b2c_09e5f9fb",
      "revId": "1b931270cbee0832c39f300374a796dfb0f1ecad",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "90b71c06_cdb27a3e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-05-16T21:31:15Z",
      "side": 1,
      "message": "hey I didn\u0027t know some tools have a max limit on uname size, and we can find another way. Thanks!",
      "parentUuid": "74787321_e74cbeb8",
      "revId": "1b931270cbee0832c39f300374a796dfb0f1ecad",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7057ecc7_1835f375",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-05-17T20:39:26Z",
      "side": 1,
      "message": "FTR: https://cs.android.com/android/kernel/superproject/+/common-android-mainline:common/include/uapi/linux/utsname.h",
      "parentUuid": "90b71c06_cdb27a3e",
      "revId": "1b931270cbee0832c39f300374a796dfb0f1ecad",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9f4d3bf6_0d46a0f0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1557540
      },
      "writtenOn": "2024-05-21T20:55:01Z",
      "side": 1,
      "message": "I think having this information in the UTS string makes perfect sense especially since the page size changes the ABI. We already have $(BRANCH)-$(KMI_GENERATION)-g$(git sha1)-ab$(BUILD_ID). All of those variables are defining the kernel version. So adding support for passing in the page size to the setlocalversion script to add to the UTS string makes the most sense to me.\n\nWith regards to say, we are at 47 bytes now which gives us plenty of room.",
      "parentUuid": "7057ecc7_1835f375",
      "revId": "1b931270cbee0832c39f300374a796dfb0f1ecad",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d050a312_877e763f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1557540
      },
      "writtenOn": "2024-05-21T20:56:46Z",
      "side": 1,
      "message": "Note, since this has implications to how tools and apps parse the string, if we go with this approach, then we need to make sure we go through a proper review with the team on how we want to update the string as well as send a message to our partners on the changes.",
      "parentUuid": "9f4d3bf6_0d46a0f0",
      "revId": "1b931270cbee0832c39f300374a796dfb0f1ecad",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ee792890_04374ef2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-05-22T22:32:01Z",
      "side": 1,
      "message": "Even with space left, I disagree it is the right place to announce the availability of individual features. Again, I understand the desire to have it visible. Yet, so far we could shield the version string from flagging (like e.g. for LTO) and I am quite insistent we should continue to do so. The version string should not become an interface for feature availability. There are more appropriate interfaces in the kernel query. To repeat myself: once we add something like this, we will not be able to remove it as downstream tools/frameworks _will_ depend on it despite us discouraging that.\n\n\u003eWe already have $(BRANCH)-$(KMI_GENERATION)-g$(git sha1)-ab$(BUILD_ID). All of those variables are defining the kernel version.\n\n\nNone of those values define feature availability. Instead, they identify the origin of the build. One could argue we should have never added the KMI_GENERATION, but alas, it is an incremental value signifying incompatibility and hence somewhat ok.\n\nAs you said, if we really really go down the road and add an interface to the UTS string, then we should make this a proper sustainable indicator leaving room for many features (e.g. encoding in a bitmap value).",
      "parentUuid": "d050a312_877e763f",
      "revId": "1b931270cbee0832c39f300374a796dfb0f1ecad",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "27cef593_2570d746",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1557540
      },
      "writtenOn": "2024-05-30T00:00:53Z",
      "side": 1,
      "message": "I would argue that the changing the page size from 4k -\u003e 16k is as big of a feature change as going from android12-5.10 to android13-5.10 which we indicate in the UTS string. It completely changes ABI compatiblity across the entire software stack from userspace to kernel compatibility. Due to that, I argue it\u0027s important enough to encode in the UTS string. I\u0027ll start an email thread on this to get consensus and establish the format we want to go with.",
      "parentUuid": "ee792890_04374ef2",
      "revId": "1b931270cbee0832c39f300374a796dfb0f1ecad",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4e77dedc_1a82b931",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-05-30T15:03:45Z",
      "side": 1,
      "message": "Thanks, Will.",
      "parentUuid": "27cef593_2570d746",
      "revId": "1b931270cbee0832c39f300374a796dfb0f1ecad",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2465fa38_6a23df6b",
        "filename": "kleaf/impl/defconfig/arm64_16k_defconfig",
        "patchSetId": 1
      },
      "lineNbr": 6,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-05-15T22:16:40Z",
      "side": 1,
      "message": "the commit message calls it \"16k\", the configuration refers to it as \"16K\", yet the suggested suffix is \"-16kB\".",
      "range": {
        "startLine": 6,
        "startChar": 21,
        "endLine": 6,
        "endChar": 26
      },
      "revId": "1b931270cbee0832c39f300374a796dfb0f1ecad",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "27b81443_e9bd251a",
        "filename": "kleaf/impl/defconfig/arm64_16k_defconfig",
        "patchSetId": 1
      },
      "lineNbr": 6,
      "author": {
        "id": 1988540
      },
      "writtenOn": "2024-05-22T00:25:25Z",
      "side": 1,
      "message": "Standardized to \"-16K\" in both commit message heading and the string",
      "parentUuid": "2465fa38_6a23df6b",
      "range": {
        "startLine": 6,
        "startChar": 21,
        "endLine": 6,
        "endChar": 26
      },
      "revId": "1b931270cbee0832c39f300374a796dfb0f1ecad",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}