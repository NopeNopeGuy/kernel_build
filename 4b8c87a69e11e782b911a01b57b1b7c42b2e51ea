{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "489472e2_1e6eb9a6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-11-14T18:29:20Z",
      "side": 1,
      "message": "Looks mostly correct to me, but I don\u0027t have enough detailed knowledge on image building and depmod, so I am handing this to Ramji.",
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1bc7a81b_ca95db75",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 35,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-11-14T18:29:20Z",
      "side": 1,
      "message": "spaces",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 35,
        "endChar": 1
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bf165309_b5bd050e",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 35,
      "author": {
        "id": 1934715
      },
      "writtenOn": "2023-11-15T21:19:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1bc7a81b_ca95db75",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 35,
        "endChar": 1
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35fcbb3e_86a6e84c",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 58,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-11-14T18:29:20Z",
      "side": 1,
      "message": "Explain what this function does and what each argument represents.\n\nWhat is being filtered out? What is it being filtered against (what does the allowlist mean)? Why do we want to filter the list?\n\nAnd since this function does not exit immediately (but returns values): what does the return value mean? Why shouldn\u0027t it exit immediately on failures?",
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b4e5d977_b7ce0bd7",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 58,
      "author": {
        "id": 1934715
      },
      "writtenOn": "2023-11-15T21:19:59Z",
      "side": 1,
      "message": "Done. I\u0027d previously added return codes so that the modules.order temp file could be cleaned up. However, I\u0027ve consolidated this all into one function so that the function can just exit immediately when an error is encountered.",
      "parentUuid": "35fcbb3e_86a6e84c",
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "91f6b07f_7936c7a2",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 77,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-11-14T18:29:20Z",
      "side": 1,
      "message": "But for commands that succeeds, the exclamation point will make it fail immediately, right?\n\nSo I think this should be `\u003ccommand\u003e || :` or `\u003ccommand\u003e || true`\n\nEDIT: I see, this was from https://android-review.git.corp.google.com/c/kernel/build/+/1427028/5/build.sh. Feel free to keep this but fix this in a follow up change.",
      "range": {
        "startLine": 77,
        "startChar": 4,
        "endLine": 77,
        "endChar": 73
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f697369e_09efebbe",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 77,
      "author": {
        "id": 1934715
      },
      "writtenOn": "2023-11-15T21:19:59Z",
      "side": 1,
      "message": "I don\u0027t think this needs to change. According to: https://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html since the status is being inverted by `!` the shell should not exit even if the return code is 0.",
      "parentUuid": "91f6b07f_7936c7a2",
      "range": {
        "startLine": 77,
        "startChar": 4,
        "endLine": 77,
        "endChar": 73
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d2b47d9_970535e2",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 77,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-11-15T22:41:21Z",
      "side": 1,
      "message": "I ran:\n\n```\nset -e\n! true\n```\n\nthen my command window exits. Am I missing something here?",
      "parentUuid": "f697369e_09efebbe",
      "range": {
        "startLine": 77,
        "startChar": 4,
        "endLine": 77,
        "endChar": 73
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0884ac6d_54db0ab5",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 77,
      "author": {
        "id": 1934715
      },
      "writtenOn": "2023-11-17T06:20:11Z",
      "side": 1,
      "message": "I tried the same thing in a script and my shell doesn\u0027t exit; I see \"hello\":\n\n#!/bin/bash\nset -e\n! true\necho hello",
      "parentUuid": "8d2b47d9_970535e2",
      "range": {
        "startLine": 77,
        "startChar": 4,
        "endLine": 77,
        "endChar": 73
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "56c2c412_0d95fa28",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 77,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-12-06T01:28:13Z",
      "side": 1,
      "message": "Ah okay. It was because it is not under a `test` or `[[`. If it were `[[ ! true ]]` then it would exit. TIL",
      "parentUuid": "0884ac6d_54db0ab5",
      "range": {
        "startLine": 77,
        "startChar": 4,
        "endLine": 77,
        "endChar": 73
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "beffb098_9cbcea47",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 78,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-11-14T18:29:20Z",
      "side": 1,
      "message": "Why do we need to escape #? # is not a special regex character right?\n\nEDIT: I see, this was from https://android-review.git.corp.google.com/c/kernel/build/+/1427028/5/build.sh. Feel free to keep this but fix this in a follow up change.",
      "range": {
        "startLine": 78,
        "startChar": 14,
        "endLine": 78,
        "endChar": 15
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "50905814_4635f503",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 78,
      "author": {
        "id": 1934715
      },
      "writtenOn": "2023-11-15T21:19:59Z",
      "side": 1,
      "message": "Fixed with  aosp/2833213",
      "parentUuid": "beffb098_9cbcea47",
      "range": {
        "startLine": 78,
        "startChar": 14,
        "endLine": 78,
        "endChar": 15
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e7826c8_3a852ed7",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 189,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-11-14T18:29:20Z",
      "side": 1,
      "message": "(same as above)\n\nwhy shouldn\u0027t filter_module_list exit immediately on failures?",
      "range": {
        "startLine": 189,
        "startChar": 0,
        "endLine": 189,
        "endChar": 14
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5f41042e_405f8452",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 189,
      "author": {
        "id": 1934715
      },
      "writtenOn": "2023-11-15T21:19:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2e7826c8_3a852ed7",
      "range": {
        "startLine": 189,
        "startChar": 0,
        "endLine": 189,
        "endChar": 14
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "30262d9d_18c1306a",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 217,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-11-14T18:29:20Z",
      "side": 1,
      "message": "unrelated, but this actually means \"remove\" modules from the tree, right?",
      "range": {
        "startLine": 217,
        "startChar": 6,
        "endLine": 217,
        "endChar": 10
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "18065bea_f638478d",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 217,
      "author": {
        "id": 1934715
      },
      "writtenOn": "2023-11-15T21:19:59Z",
      "side": 1,
      "message": "Yes. Should I update the comment to reflect that?",
      "parentUuid": "30262d9d_18c1306a",
      "range": {
        "startLine": 217,
        "startChar": 6,
        "endLine": 217,
        "endChar": 10
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a79e7a1_60d74540",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 217,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-11-15T22:43:30Z",
      "side": 1,
      "message": "If you do so, please do so in a separate CL. NBD though",
      "parentUuid": "18065bea_f638478d",
      "range": {
        "startLine": 217,
        "startChar": 6,
        "endLine": 217,
        "endChar": 10
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8b7ebda2_0894c05f",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 217,
      "author": {
        "id": 1934715
      },
      "writtenOn": "2023-11-17T06:28:48Z",
      "side": 1,
      "message": "Fixed with aosp/2835777",
      "parentUuid": "0a79e7a1_60d74540",
      "range": {
        "startLine": 217,
        "startChar": 6,
        "endLine": 217,
        "endChar": 10
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3794dc7f_2d8ad2de",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 221,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-11-14T18:29:20Z",
      "side": 1,
      "message": "Under `set -e`, if the file does not exist, this command will immediately fail.\n\nI think it needs to be converted to a proper `if` statement.",
      "range": {
        "startLine": 221,
        "startChar": 35,
        "endLine": 221,
        "endChar": 37
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9163e32f_ad355df3",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 221,
      "author": {
        "id": 1934715
      },
      "writtenOn": "2023-11-15T21:19:59Z",
      "side": 1,
      "message": "I don\u0027t think the command will fail if the file does not exist. According to https://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html, `set -e` will cause a failure if the second part of the command fails, which is what we would expect, so it should be fine as is.",
      "parentUuid": "3794dc7f_2d8ad2de",
      "range": {
        "startLine": 221,
        "startChar": 35,
        "endLine": 221,
        "endChar": 37
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4442a670_3399e0e2",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 221,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-11-15T22:43:30Z",
      "side": 1,
      "message": "Same as above. I ran:\n\n```\nset -e\n[[ -f does_not_exist ]] \u0026\u0026 echo true\n```\n\nthen my command window immediately exits. Right?",
      "parentUuid": "9163e32f_ad355df3",
      "range": {
        "startLine": 221,
        "startChar": 35,
        "endLine": 221,
        "endChar": 37
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5910fb0a_4244eaa6",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 221,
      "author": {
        "id": 1934715
      },
      "writtenOn": "2023-11-17T06:20:11Z",
      "side": 1,
      "message": "Correct. I think `[[ -f ... ]]` is a test and not a command, so that\u0027s why it fails. Fixed with proper `if` statements. thanks for catching that!",
      "parentUuid": "4442a670_3399e0e2",
      "range": {
        "startLine": 221,
        "startChar": 35,
        "endLine": 221,
        "endChar": 37
      },
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b702de1c_3888414e",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 362,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-11-14T18:29:20Z",
      "side": 1,
      "message": "fix args",
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "695b5b80_1e4e0d22",
        "filename": "build_utils.sh",
        "patchSetId": 4
      },
      "lineNbr": 362,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2023-11-14T18:38:10Z",
      "side": 1,
      "message": "Acknowledged, this doesn\u0027t have depmod_flags",
      "parentUuid": "b702de1c_3888414e",
      "revId": "4b8c87a69e11e782b911a01b57b1b7c42b2e51ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}