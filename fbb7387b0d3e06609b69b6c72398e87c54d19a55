{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "9a96ee1c_9c421f35",
        "filename": "kleaf/impl/kernel_modules_install.bzl",
        "patchSetId": 4
      },
      "lineNbr": 82,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-03-12T23:30:14Z",
      "side": 1,
      "message": "Unnecessary. The for loop will be a no op if the list is empty.\n\nNone check is not needed; ctx.attr.\u003clist_attr\u003e will never be None.",
      "range": {
        "startLine": 82,
        "startChar": 0,
        "endLine": 82,
        "endChar": 32
      },
      "revId": "fbb7387b0d3e06609b69b6c72398e87c54d19a55",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d63fe345_f5584196",
        "filename": "kleaf/impl/kernel_modules_install.bzl",
        "patchSetId": 4
      },
      "lineNbr": 82,
      "author": {
        "id": 1684017
      },
      "writtenOn": "2024-03-13T08:18:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a96ee1c_9c421f35",
      "range": {
        "startLine": 82,
        "startChar": 0,
        "endLine": 82,
        "endChar": 32
      },
      "revId": "fbb7387b0d3e06609b69b6c72398e87c54d19a55",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "640e18dd_c75edf7a",
        "filename": "kleaf/impl/kernel_modules_install.bzl",
        "patchSetId": 4
      },
      "lineNbr": 282,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-03-12T23:30:14Z",
      "side": 1,
      "message": "just `outs`",
      "range": {
        "startLine": 282,
        "startChar": 9,
        "endLine": 282,
        "endChar": 24
      },
      "revId": "fbb7387b0d3e06609b69b6c72398e87c54d19a55",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b27e4625_08509913",
        "filename": "kleaf/impl/kernel_modules_install.bzl",
        "patchSetId": 4
      },
      "lineNbr": 282,
      "author": {
        "id": 1684017
      },
      "writtenOn": "2024-03-13T08:18:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "640e18dd_c75edf7a",
      "range": {
        "startLine": 282,
        "startChar": 9,
        "endLine": 282,
        "endChar": 24
      },
      "revId": "fbb7387b0d3e06609b69b6c72398e87c54d19a55",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "44b7f73f_70e35903",
        "filename": "kleaf/impl/kernel_modules_install.bzl",
        "patchSetId": 4
      },
      "lineNbr": 283,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-03-12T23:30:14Z",
      "side": 1,
      "message": "explain a bit more about where these output files are from. e.g. ```a list of additional outputs from `make modules_install`. Items may be `Modules.dep`, `Modules.alias`, etc.```",
      "range": {
        "startLine": 283,
        "startChar": 40,
        "endLine": 283,
        "endChar": 46
      },
      "revId": "fbb7387b0d3e06609b69b6c72398e87c54d19a55",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26bde162_80acfbe5",
        "filename": "kleaf/impl/kernel_modules_install.bzl",
        "patchSetId": 4
      },
      "lineNbr": 283,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-03-12T23:30:14Z",
      "side": 1,
      "message": "To avoid being abused, instead of letting the caller to specify this list, consider adding\n\n```\nvalues \u003d [\n    \"Modules.dep\",\n    \"Modules.alias\",\n]\n```",
      "revId": "fbb7387b0d3e06609b69b6c72398e87c54d19a55",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b5c8eb43_71eabe4e",
        "filename": "kleaf/impl/kernel_modules_install.bzl",
        "patchSetId": 4
      },
      "lineNbr": 283,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-03-12T23:33:43Z",
      "side": 1,
      "message": "I mean, to avoid being abused, instead of **allowing arbitrary values**, consider adding\n\n```\nvalues \u003d [\n    \"Modules.dep\",\n    \"Modules.alias\",\n]\n```",
      "parentUuid": "26bde162_80acfbe5",
      "revId": "fbb7387b0d3e06609b69b6c72398e87c54d19a55",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "489182f5_8f843148",
        "filename": "kleaf/impl/kernel_modules_install.bzl",
        "patchSetId": 4
      },
      "lineNbr": 283,
      "author": {
        "id": 1684017
      },
      "writtenOn": "2024-03-13T08:18:17Z",
      "side": 1,
      "message": "The string_list attribute does not have a values ​​parameter.\nI tried making code like below for this, but...it\u0027s not nice.\n\n     for out in ctx.attr.outs:\n        if out.startswith(\"modules.\") and not out.endswith(\".ko\"):\n             out_file \u003d ctx.actions.declare_file(\"{}/{}\".format(ctx.label.name, out))\n             outs.append(out_file)\n\n\nCould you please tell me another way?",
      "parentUuid": "b5c8eb43_71eabe4e",
      "revId": "fbb7387b0d3e06609b69b6c72398e87c54d19a55",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d82789a1_114ba97c",
        "filename": "kleaf/impl/kernel_modules_install.bzl",
        "patchSetId": 4
      },
      "lineNbr": 283,
      "author": {
        "id": 1684017
      },
      "writtenOn": "2024-03-13T08:18:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "44b7f73f_70e35903",
      "range": {
        "startLine": 283,
        "startChar": 40,
        "endLine": 283,
        "endChar": 46
      },
      "revId": "fbb7387b0d3e06609b69b6c72398e87c54d19a55",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b17a7716_f1961363",
        "filename": "kleaf/impl/kernel_modules_install.bzl",
        "patchSetId": 4
      },
      "lineNbr": 283,
      "author": {
        "id": 1961395
      },
      "writtenOn": "2024-03-14T12:54:18Z",
      "side": 1,
      "message": "That\u0027s Bazel issue[0], I think keeping an allowlist of values is good enough here.\n\n[0] https://github.com/bazelbuild/bazel/issues/19923",
      "parentUuid": "489182f5_8f843148",
      "revId": "fbb7387b0d3e06609b69b6c72398e87c54d19a55",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8b2b3232_387f0791",
        "filename": "kleaf/impl/kernel_modules_install.bzl",
        "patchSetId": 4
      },
      "lineNbr": 283,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-03-14T19:22:10Z",
      "side": 1,
      "message": "Perhaps:\n\n```\n_OUT_ALLOWLIST \u003d [\n    \"modules.dep\",\n    \"modules.alias\",\n]\n# ...\nfor out in ctx.attr.outs:\n    if out not in _OUT_ALLOWLIST:\n        fail(...)\n```",
      "parentUuid": "b17a7716_f1961363",
      "revId": "fbb7387b0d3e06609b69b6c72398e87c54d19a55",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}