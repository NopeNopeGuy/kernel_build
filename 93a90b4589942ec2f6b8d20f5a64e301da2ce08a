{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "0f6ee656_e79ffd72",
        "filename": "kleaf/docs/abi_device.md",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2022-05-19T09:31:57Z",
      "side": 1,
      "message": "is it possible to make `kernel_build()` do that for us (perhaps there with the flag `define_abi_targets`) and all those targets get created automatically?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 76
      },
      "revId": "93a90b4589942ec2f6b8d20f5a64e301da2ce08a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "347e7bc2_36494fcc",
        "filename": "kleaf/docs/abi_device.md",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-05-19T18:52:19Z",
      "side": 1,
      "message": "Here\u0027s what I can do:\n\n- kernel_build -\u003e _kernel_build_internal\n- kernel_build_abi -\u003e kernel_build\n- set `kernel_build_abi \u003d kernel_build` before migrating all users\n\nHowever, kernel_build_abi with define_abi_targets\u003dFalse is still a bit different from kernel_build in that:\n\n- abi.xml is always created (because CL:2064551)\n- collect_unstripped_modules is True by default (because it is needed by abi.xml)\n\n... and collect_unstripped_modules adds overhead to the kernel_build in the critical path, though only by a little bit.\n\nAlternatively, I could also make ABI targets on mainline no longer generate abi.xml. This will deviate from what build_abi.sh is doing on mainline branches.\n\nWDYT?",
      "parentUuid": "0f6ee656_e79ffd72",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 76
      },
      "revId": "93a90b4589942ec2f6b8d20f5a64e301da2ce08a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "aeded413_b4a590c3",
        "filename": "kleaf/docs/abi_device.md",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-05-19T21:18:37Z",
      "side": 1,
      "message": "I can do this in a follow-up CL if you think the plan looks good. The doc right now is consistent with abi.md, which is already checked-in.",
      "parentUuid": "347e7bc2_36494fcc",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 76
      },
      "revId": "93a90b4589942ec2f6b8d20f5a64e301da2ce08a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "208952c3_eb62ca81",
        "filename": "kleaf/docs/abi_device.md",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2022-05-26T14:48:07Z",
      "side": 1,
      "message": "We need ABI tooling to run on android-mainline to catch if kernel source code changes break the tooling. But if this is just a matter of migrating there, I am fine. What I suggested in the first comment was rather an \"ideal state\". I would like to have `kernel_build()` just have the ABI flag to enable additional functionality. The additional target definition looked like a lot of work on user side.",
      "parentUuid": "aeded413_b4a590c3",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 76
      },
      "revId": "93a90b4589942ec2f6b8d20f5a64e301da2ce08a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ed2fa3b9_09f64f0b",
        "filename": "kleaf/docs/abi_device.md",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-05-26T20:09:30Z",
      "side": 1,
      "message": "Even if I switch to `kernel_build` to have `kernel_build_abi`\u0027s functionality, it still needs the additional attributes defined below.\n\nFiled b/234047734.",
      "parentUuid": "208952c3_eb62ca81",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 76
      },
      "revId": "93a90b4589942ec2f6b8d20f5a64e301da2ce08a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "51df7097_bb67bbe4",
        "filename": "kleaf/docs/abi_device.md",
        "patchSetId": 4
      },
      "lineNbr": 18,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2022-05-19T09:31:57Z",
      "side": 1,
      "message": "move this up to be the first argument.",
      "revId": "93a90b4589942ec2f6b8d20f5a64e301da2ce08a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d5b9e897_f9337e27",
        "filename": "kleaf/docs/abi_device.md",
        "patchSetId": 4
      },
      "lineNbr": 18,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-05-19T19:22:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "51df7097_bb67bbe4",
      "revId": "93a90b4589942ec2f6b8d20f5a64e301da2ce08a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec60c99e_ab72f554",
        "filename": "kleaf/docs/abi_device.md",
        "patchSetId": 4
      },
      "lineNbr": 40,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2022-05-19T09:31:57Z",
      "side": 1,
      "message": "Change 2022075, as in Git/Gerrit we have \"Commit\"/\"Change\"",
      "range": {
        "startLine": 40,
        "startChar": 5,
        "endLine": 40,
        "endChar": 15
      },
      "revId": "93a90b4589942ec2f6b8d20f5a64e301da2ce08a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c58d17bb_b495d53f",
        "filename": "kleaf/docs/abi_device.md",
        "patchSetId": 4
      },
      "lineNbr": 40,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2022-05-19T19:22:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ec60c99e_ab72f554",
      "range": {
        "startLine": 40,
        "startChar": 5,
        "endLine": 40,
        "endChar": 15
      },
      "revId": "93a90b4589942ec2f6b8d20f5a64e301da2ce08a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}