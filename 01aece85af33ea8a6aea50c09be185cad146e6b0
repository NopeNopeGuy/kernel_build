{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "84ddbd63_de2a1386",
        "filename": "kleaf/impl/kernel_env.bzl",
        "patchSetId": 1
      },
      "lineNbr": 182,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-01-10T21:43:33Z",
      "side": 0,
      "message": "This is from CL:1896501.\n\nUsually we use short_path for `bazel run` stuff and path for `bazel build`. This change looks correct in this context (because we are `bazel build`-ing this action; i.e. this is a `ctx.actions.run_shell()`). But can you double check that the KCONFIG_EXT set here isn\u0027t used by any `bazel run` actions (where we dump the script to an executable)?\n\nFor example, `bazel run X_config` uses [_get_run_env](https://cs.android.com/android/kernel/superproject/+/common-android-mainline:build/kernel/kleaf/impl/kernel_env.bzl;l\u003d426;drc\u003d35f4ae5c362b8ccbff52e5579c74ec83da8cda54). Please check if this change does not affect `bazel run //common:kernel_aarch64_config` or the `bazel run x_config` for Pixel devices? If so, I think KCONFIG_EXT needs to be adjusted accordingly for `bazel run x_config`.\n\nI can\u0027t recall if there are any other places where the value set here may be used in `bazel run` stuff.",
      "range": {
        "startLine": 182,
        "startChar": 12,
        "endLine": 182,
        "endChar": 49
      },
      "revId": "01aece85af33ea8a6aea50c09be185cad146e6b0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b0319dad_8ccd8416",
        "filename": "kleaf/impl/kernel_env.bzl",
        "patchSetId": 1
      },
      "lineNbr": 182,
      "author": {
        "id": 1961395
      },
      "writtenOn": "2024-01-10T22:17:33Z",
      "side": 0,
      "message": "I ran (with success):\n * `bazel run //aosp:kernel_aarch64_config -- menuconfig`\n * `bazel run --config\u003d\u003cdevice_configs\u003e  //\u003cpath_to_\u003e:\u003cdevice\u003e_config -- menuconfig`\n \nPlease also note this is for `main-kernel-build-2023` branch, so I can do additional checks if needed, do you have more suggestions for what I can check?",
      "parentUuid": "84ddbd63_de2a1386",
      "range": {
        "startLine": 182,
        "startChar": 12,
        "endLine": 182,
        "endChar": 49
      },
      "revId": "01aece85af33ea8a6aea50c09be185cad146e6b0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "90b0b2f8_71baa030",
        "filename": "kleaf/impl/kernel_env.bzl",
        "patchSetId": 1
      },
      "lineNbr": 182,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-01-10T22:20:07Z",
      "side": 0,
      "message": "Ah indeed. In L405:\n\n\u003e     - It doesn\u0027t set `KCONFIG_EXT_PREFIX` or `dtstree`",
      "parentUuid": "b0319dad_8ccd8416",
      "range": {
        "startLine": 182,
        "startChar": 12,
        "endLine": 182,
        "endChar": 49
      },
      "revId": "01aece85af33ea8a6aea50c09be185cad146e6b0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}